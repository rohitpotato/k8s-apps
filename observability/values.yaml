nodeSelector:
  nodeRole: worker

grafana:
  enabled: true
  ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-production
      kubernetes.io/ingress.class: traefik
    hosts:
      - grafana.rohitpotato.xyz
    paths:
      - /
    pathType: Prefix
    tls:
    - secretName: grafana-tls
      hosts:
      - grafana.rohitpotato.xyz
  additionalDataSources:
    - name: loki
      type: loki
      access: proxy
      url: http://loki.monitoring.svc.cluster.local:3100
      isDefault: false
  # Add Linkerd dashboards
  dashboards:
    default:
      linkerd:
        gnetId: 3150
        revision: 22
        datasource: Prometheus
      linkerd-namespace:
        gnetId: 3151
        revision: 8
        datasource: Prometheus
      linkerd-service:
        gnetId: 3152
        revision: 8
        datasource: Prometheus
      linkerd-pod:
        gnetId: 3153
        revision: 8
        datasource: Prometheus
      linkerd-workload:
        gnetId: 3154
        revision: 8
        datasource: Prometheus
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
defaultRules:
  rules:
    etcd: false

kubeEtcd:
  enabled: true

kubeControllerManager:
  enabled: true
  endpoints: ['45.136.30.195'] # this is master node's actual ip address
  service:
    enabled: true
    port: 10257
    targetPort: 10257
  serviceMonitor:
    enabled: true
    https: false

kubeScheduler:
  enabled: true
  endpoints: ['45.136.30.195'] # this is master node's actual ip address
  service:
    enabled: true
    port: 10259
    targetPort: 10259
  serviceMonitor:
    enabled: true
    https: false

kubeProxy:
  enabled: true
  endpoints: ['45.136.30.195'] # this is master node's actual ip address
  service:
    enabled: true
    port: 10249
    targetPort: 10249
  serviceMonitor:
    enabled: true
    https: false

# Resource limits for Prometheus stack components
prometheus:
  prometheusSpec:
    resources:
      requests:
        memory: "400Mi"
        cpu: "200m"
      limits:
        memory: "800Mi"
        cpu: "400m"

alertmanager:
  alertmanagerSpec:
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
        memory: "256Mi"
        cpu: "200m"
